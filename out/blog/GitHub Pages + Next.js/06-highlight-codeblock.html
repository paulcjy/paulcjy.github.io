<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/8c778e73ed56f245.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-bbf113c12daff4e1.js" crossorigin=""/><script src="/_next/static/chunks/fd9d1056-3fff9b67ef16feea.js" async="" crossorigin=""></script><script src="/_next/static/chunks/472-d3310efd4ae08a92.js" async="" crossorigin=""></script><script src="/_next/static/chunks/main-app-cc69ecf488c161dd.js" async="" crossorigin=""></script><script src="/_next/static/chunks/326-9823f391d24e26fc.js" async=""></script><script src="/_next/static/chunks/app/layout-c52e075abc27b8ed.js" async=""></script><script src="/_next/static/chunks/app/blog/%5Bboard%5D/page-86149bc53665de2b.js" async=""></script><title>Contentlayer에서 코드블럭 하이라이트 | 개발 일지</title><link rel="icon" href="/favicon.png"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body><script>!function(){try{var d=document.documentElement,c=d.classList;c.remove('light','dark');var e=localStorage.getItem('theme');if('system'===e||(!e&&true)){var t='(prefers-color-scheme: dark)',m=window.matchMedia(t);if(m.media!==t||m.matches){d.style.colorScheme = 'dark';c.add('dark')}else{d.style.colorScheme = 'light';c.add('light')}}else if(e){c.add(e|| '')}if(e==='light'||e==='dark')d.style.colorScheme=e}catch(e){}}()</script><header class="h-16 sticky top-0 flex justify-center shadow bg-white/70 items-center backdrop-blur-sm dark:bg-black/80 dark:shadow-neutral-800"><nav class="flex "><div class="flex font-bold"><a class="transition flex justify-center w-16 text-gray-900 hover:text-gray-300 dark:text-gray-100 dark:hover:text-gray-600" href="/blog">Blog</a><a class="transition flex justify-center w-16 text-gray-900 hover:text-gray-300 dark:text-gray-100 dark:hover:text-gray-600" href="/about">About</a></div><div class="flex"></div></nav></header><main><div class="my-10 grid grid-cols-[1fr,minmax(auto,1100px),1fr]"><div class="col-start-2 grid grid-cols-[minmax(auto,200px),min(700px,100%)] gap-x-10"><div><div class="space-y-5"><div><div class="mb-1 px-3 font-semibold tracking-wider text-zinc-400">Web</div><a class="block rounded-md m-0 px-3 py-1 text-sm font-medium hover:bg-gray-100 hover:text-zinc-800 dark:hover:bg-zinc-800 dark:hover:text-zinc-100" href="/blog/GitHub Pages + Next.js"><span class="pr-1.5">GitHub Pages + Next.js</span><span class="text-gray-400">(<!-- -->9<!-- -->)</span></a></div></div></div><div><article class="mx-auto"><div class="mb-12 text-center"><h1 class="mb-1 text-3xl font-bold">Contentlayer에서 코드블럭 하이라이트</h1><time dateTime="2023-11-18T12:30:00.000Z" class="mb-1 text-xs text-gray-600 dark:text-gray-400">2023. 11. 18. 21:30</time></div><div class="markdown-body"><p>마크다운에 깃허브 스타일을 적용했지만, 코드블럭은 하이라이트되지 않는다. Contentlayer에서는 플러그인 설치와 설정만 하면 쉽게 코드를 하이라이트 할 수 있다. Contentlayer 공식 문서에서 <a href="https://www.npmjs.com/package/rehype-highlight" title="rehype-highlight">rehype-highlight</a>를 사용했기 때문에 그대로 따라했다.</p>
<p><a href="https://contentlayer.dev/docs/reference/source-files/make-source-a5ba4922#markdown" title="Contentlayer API: makeSource">Contentlayer 마크다운 하이라이트 예제</a></p>
<h1>rehype-highlight 설치</h1>
<p><a href="https://www.npmjs.com/package/rehype-highlight" title="rehype-highlight">rehype-highlight</a>는 <a href="https://highlightjs.org/" title="highlight.js">highlight.js</a>를 이용해서 만든 rehype 플러그인이다. 단, <code>6.0.0</code> 버전을 설치해야 한다. 최신 버전인 <code>7.0.0</code>을 설치하면 작동하지 않는다.</p>
<pre><code class="hljs language-txt">npm install rehype-highlight@6.0.0
</code></pre>
<h1>contentlayer.config.js 설정</h1>
<p>설정 파일 <code>contentlayer.config.js</code>에서 <code>makeSource</code>의 <code>markdown</code> > <code>rehypePlugins</code>에 설치한 <code>rehype-highlight</code>를 넣어준다.</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">import</span> { makeSource } <span class="hljs-keyword">from</span> <span class="hljs-string">'@contentlayer/source-files'</span>
<span class="hljs-keyword">import</span> rehypeHighlight <span class="hljs-keyword">from</span> <span class="hljs-string">'rehype-highlight'</span>

<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">makeSource</span>({
  <span class="hljs-comment">// ...</span>
  <span class="hljs-attr">markdown</span>: { <span class="hljs-attr">rehypePlugins</span>: [rehypeHighlight] },
})
</code></pre>
<p>공식 문서에는 플러그인에 <code>highlight</code>라고 적어놨지만, <code>rehypeHighlight</code>를 입력하면 vscode에서 자동으로 완성해준다.</p>
<h2>테스트</h2>
<p>rehype-highlight가 잘 적용되었는지 확인하려면, 페이지에 접속해서 코드블럭 부분을 개발자 도구로 확인해보면 된다. <code>&#x3C;pre></code>태그 내부에 있는 <code>&#x3C;code></code>태그 혹은 <code>&#x3C;span></code>태그에 클래스로 <code>hljs</code>가 들어있으면 작동하는 것이다.</p>
<pre><code class="hljs language-html"><span class="hljs-tag">&#x3C;<span class="hljs-name">code</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hljs language-ts"</span>></span>
  <span class="hljs-tag">&#x3C;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hljs-keyword"</span>></span>import<span class="hljs-tag">&#x3C;/<span class="hljs-name">span</span>></span> { makeSource }
  <span class="hljs-tag">&#x3C;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hljs-keyword"</span>></span>from<span class="hljs-tag">&#x3C;/<span class="hljs-name">span</span>></span>
  <span class="hljs-tag">&#x3C;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hljs-string"</span>></span>'@contentlayer/source-files'<span class="hljs-tag">&#x3C;/<span class="hljs-name">span</span>></span>
  <span class="hljs-tag">&#x3C;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hljs-keyword"</span>></span>import<span class="hljs-tag">&#x3C;/<span class="hljs-name">span</span>></span> rehypeHighlight
  <span class="hljs-tag">&#x3C;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hljs-keyword"</span>></span>from<span class="hljs-tag">&#x3C;/<span class="hljs-name">span</span>></span>
  <span class="hljs-tag">&#x3C;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hljs-string"</span>></span>'rehype-highlight'<span class="hljs-tag">&#x3C;/<span class="hljs-name">span</span>></span>
  <span class="hljs-tag">&#x3C;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hljs-keyword"</span>></span>export<span class="hljs-tag">&#x3C;/<span class="hljs-name">span</span>></span>
  <span class="hljs-tag">&#x3C;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hljs-keyword"</span>></span>default<span class="hljs-tag">&#x3C;/<span class="hljs-name">span</span>></span>
  <span class="hljs-tag">&#x3C;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hljs-title function_"</span>></span>makeSource<span class="hljs-tag">&#x3C;/<span class="hljs-name">span</span>></span>({
  <span class="hljs-tag">&#x3C;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hljs-comment"</span>></span>// ...<span class="hljs-tag">&#x3C;/<span class="hljs-name">span</span>></span>
  <span class="hljs-tag">&#x3C;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hljs-attr"</span>></span>markdown<span class="hljs-tag">&#x3C;/<span class="hljs-name">span</span>></span>: {
  <span class="hljs-tag">&#x3C;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"hljs-attr"</span>></span>rehypePlugins<span class="hljs-tag">&#x3C;/<span class="hljs-name">span</span>></span>: [rehypeHighlight] }, })
<span class="hljs-tag">&#x3C;/<span class="hljs-name">code</span>></span>
</code></pre>
<p><code>&#x3C;span></code>태그의 클래스에서 'hljs-' 오른쪽에 있는 부분이 해당 코드를 어떤 색으로 칠해야 하는지를 나타낸다.</p>
<h1>CSS 파일 다운</h1>
<p>rehype-highlight를 적용하더라도 CSS 파일을 불러오지 않으면 코드에 색상이 적용되지 않는다. CSS는 원하는 스타일을 알아서 찾아야 한다.
단, rehype 플러그인으로 rehype-highlight를 사용했으므로 CSS 파일은 반드시 highlight.js에서 찾아야 한다.</p>
<h2>highlight.js에서 가져오기</h2>
<p>나는 GitHub의 마크다운 스타일을 적용하고 싶어서 코드블럭도 GitHub 스타일로 했다. CSS 파일을 쉽게 찾기 위해 <a href="https://highlightjs.org/" title="highlight.js">highlight.js</a>을 설치했다.</p>
<pre><code class="hljs language-sh">npm install highlight.js
</code></pre>
<p><code>node_modules/highlight.js/styles</code>를 열어보면 굉장히 많은 CSS 파일을 찾을 수 있다. 하나하나가 다 코드블럭 CSS 파일들이다. <code>.min.css</code>는 크기를 줄인 파일, <code>.css</code>는 일반 CSS 파일이다. 다크 모드와 라이트 모드가 필요해서 <code>github-dark.css</code>와 <code>github.css</code>를 가져왔고, 파일을 얻은 뒤에는 highlight.js를 삭제했다. <code>.min.css</code>를 가져오면 수정이 어렵다.</p>
<p><strong>패키지 설치가 싫다면 <a href="https://github.com/highlightjs/highlight.js/tree/main/src/styles" title="highlight.js GitHub Repository: /src/styles">highlight.js 리포지토리</a>에서도 가져올 수 있다.</strong></p>
<h2>다크 모드 / 라이트 모드 합치기</h2>
<p>각 파일에는 클래스와 색상이 바로 연결되어 있다. Tailwind CSS로 다크 모드와 라이트 모드를 사용하기 위해 <code>&#x3C;html></code>태그의 <code>class</code>를 <code>dark</code>와 <code>light</code>로 바꿔줄 것이기 때문에 이것을 이용해서 두 파일을 합쳤다.</p>
<p>먼저, 각 파일에 있는 색상 코드를 변수로 만들어준다. 변수 이름은 자유롭게 짓는다. 다크 모드와 라이트 모드에서 같은 이름의 변수를 사용해야 한다.</p>
<pre><code class="hljs language-css"><span class="hljs-selector-tag">html</span>,
<span class="hljs-selector-tag">html</span><span class="hljs-selector-attr">[class=<span class="hljs-string">'light'</span>]</span> {
  <span class="hljs-attr">--color-hljs-color</span>: <span class="hljs-number">#24292e</span>;
  <span class="hljs-attr">--color-hljs-background</span>: <span class="hljs-number">#ffffff</span>;
  ...;
}
<span class="hljs-selector-tag">html</span><span class="hljs-selector-attr">[class=<span class="hljs-string">'dark'</span>]</span> {
  <span class="hljs-attr">--color-hljs-color</span>: <span class="hljs-number">#c9d1d9</span>;
  <span class="hljs-attr">--color-hljs-background</span>: <span class="hljs-number">#0d1117</span>;
  ...;
}
</code></pre>
<p>그리고 원래 색상 코드가 있던 자리에 해당 변수를 넣어준다.</p>
<pre><code class="hljs language-css"><span class="hljs-selector-class">.hljs</span> {
	<span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--color-hljs-background);
}

...

<span class="hljs-selector-class">.hljs-section</span> {
	<span class="hljs-attribute">color</span>: <span class="hljs-built_in">var</span>(--color-section);
	<span class="hljs-attribute">font-weight</span>: bold;
}

...
</code></pre>
<blockquote>
<p>혹시나 이 작업이 귀찮다면 내가 <a href="/github-markdown-codeblock.css" title="github-markdown-codeblock.css">합쳐놓은 파일</a>을 사용해도 된다.</p>
</blockquote>
<h2>CSS 적용</h2>
<p><code>/app/layout</code>에 CSS 파일을 import 한다.</p></div></article></div></div></div></main><script src="/_next/static/chunks/webpack-bbf113c12daff4e1.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/8c778e73ed56f245.css\",\"style\",{\"crossOrigin\":\"\"}]\n0:\"$L2\"\n"])</script><script>self.__next_f.push([1,"3:I[3728,[],\"\"]\n5:I[9928,[],\"\"]\n6:I[2649,[\"326\",\"static/chunks/326-9823f391d24e26fc.js\",\"185\",\"static/chunks/app/layout-c52e075abc27b8ed.js\"],\"CustomThemeProvider\"]\n7:I[8326,[\"326\",\"static/chunks/326-9823f391d24e26fc.js\",\"431\",\"static/chunks/app/blog/%5Bboard%5D/page-86149bc53665de2b.js\"],\"\"]\n8:I[5235,[\"326\",\"static/chunks/326-9823f391d24e26fc.js\",\"185\",\"static/chunks/app/layout-c52e075abc27b8ed.js\"],\"\"]\n9:I[6954,[],\"\"]\na:I[7264,[],\"\"]\nb:[\"board\",\"GitHub%20Pages%20%2B%20Next.js\",\"d\"]\nd:T256b,"])</script><script>self.__next_f.push([1,"\u003cp\u003e마크다운에 깃허브 스타일을 적용했지만, 코드블럭은 하이라이트되지 않는다. Contentlayer에서는 플러그인 설치와 설정만 하면 쉽게 코드를 하이라이트 할 수 있다. Contentlayer 공식 문서에서 \u003ca href=\"https://www.npmjs.com/package/rehype-highlight\" title=\"rehype-highlight\"\u003erehype-highlight\u003c/a\u003e를 사용했기 때문에 그대로 따라했다.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://contentlayer.dev/docs/reference/source-files/make-source-a5ba4922#markdown\" title=\"Contentlayer API: makeSource\"\u003eContentlayer 마크다운 하이라이트 예제\u003c/a\u003e\u003c/p\u003e\n\u003ch1\u003erehype-highlight 설치\u003c/h1\u003e\n\u003cp\u003e\u003ca href=\"https://www.npmjs.com/package/rehype-highlight\" title=\"rehype-highlight\"\u003erehype-highlight\u003c/a\u003e는 \u003ca href=\"https://highlightjs.org/\" title=\"highlight.js\"\u003ehighlight.js\u003c/a\u003e를 이용해서 만든 rehype 플러그인이다. 단, \u003ccode\u003e6.0.0\u003c/code\u003e 버전을 설치해야 한다. 최신 버전인 \u003ccode\u003e7.0.0\u003c/code\u003e을 설치하면 작동하지 않는다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-txt\"\u003enpm install rehype-highlight@6.0.0\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch1\u003econtentlayer.config.js 설정\u003c/h1\u003e\n\u003cp\u003e설정 파일 \u003ccode\u003econtentlayer.config.js\u003c/code\u003e에서 \u003ccode\u003emakeSource\u003c/code\u003e의 \u003ccode\u003emarkdown\u003c/code\u003e \u003e \u003ccode\u003erehypePlugins\u003c/code\u003e에 설치한 \u003ccode\u003erehype-highlight\u003c/code\u003e를 넣어준다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { makeSource } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@contentlayer/source-files'\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e rehypeHighlight \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'rehype-highlight'\u003c/span\u003e\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003edefault\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003emakeSource\u003c/span\u003e({\n  \u003cspan class=\"hljs-comment\"\u003e// ...\u003c/span\u003e\n  \u003cspan class=\"hljs-attr\"\u003emarkdown\u003c/span\u003e: { \u003cspan class=\"hljs-attr\"\u003erehypePlugins\u003c/span\u003e: [rehypeHighlight] },\n})\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e공식 문서에는 플러그인에 \u003ccode\u003ehighlight\u003c/code\u003e라고 적어놨지만, \u003ccode\u003erehypeHighlight\u003c/code\u003e를 입력하면 vscode에서 자동으로 완성해준다.\u003c/p\u003e\n\u003ch2\u003e테스트\u003c/h2\u003e\n\u003cp\u003erehype-highlight가 잘 적용되었는지 확인하려면, 페이지에 접속해서 코드블럭 부분을 개발자 도구로 확인해보면 된다. \u003ccode\u003e\u0026#x3C;pre\u003e\u003c/code\u003e태그 내부에 있는 \u003ccode\u003e\u0026#x3C;code\u003e\u003c/code\u003e태그 혹은 \u003ccode\u003e\u0026#x3C;span\u003e\u003c/code\u003e태그에 클래스로 \u003ccode\u003ehljs\u003c/code\u003e가 들어있으면 작동하는 것이다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-html\"\u003e\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003ecode\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"hljs language-ts\"\u003c/span\u003e\u003e\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"hljs-keyword\"\u003c/span\u003e\u003e\u003c/span\u003eimport\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e\u003e\u003c/span\u003e { makeSource }\n  \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"hljs-keyword\"\u003c/span\u003e\u003e\u003c/span\u003efrom\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e\u003e\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"hljs-string\"\u003c/span\u003e\u003e\u003c/span\u003e'@contentlayer/source-files'\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e\u003e\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"hljs-keyword\"\u003c/span\u003e\u003e\u003c/span\u003eimport\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e\u003e\u003c/span\u003e rehypeHighlight\n  \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"hljs-keyword\"\u003c/span\u003e\u003e\u003c/span\u003efrom\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e\u003e\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"hljs-string\"\u003c/span\u003e\u003e\u003c/span\u003e'rehype-highlight'\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e\u003e\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"hljs-keyword\"\u003c/span\u003e\u003e\u003c/span\u003eexport\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e\u003e\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"hljs-keyword\"\u003c/span\u003e\u003e\u003c/span\u003edefault\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e\u003e\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"hljs-title function_\"\u003c/span\u003e\u003e\u003c/span\u003emakeSource\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e\u003e\u003c/span\u003e({\n  \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"hljs-comment\"\u003c/span\u003e\u003e\u003c/span\u003e// ...\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e\u003e\u003c/span\u003e\n  \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"hljs-attr\"\u003c/span\u003e\u003e\u003c/span\u003emarkdown\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e\u003e\u003c/span\u003e: {\n  \u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e \u003cspan class=\"hljs-attr\"\u003eclass\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"hljs-attr\"\u003c/span\u003e\u003e\u003c/span\u003erehypePlugins\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003espan\u003c/span\u003e\u003e\u003c/span\u003e: [rehypeHighlight] }, })\n\u003cspan class=\"hljs-tag\"\u003e\u0026#x3C;/\u003cspan class=\"hljs-name\"\u003ecode\u003c/span\u003e\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003e\u0026#x3C;span\u003e\u003c/code\u003e태그의 클래스에서 'hljs-' 오른쪽에 있는 부분이 해당 코드를 어떤 색으로 칠해야 하는지를 나타낸다.\u003c/p\u003e\n\u003ch1\u003eCSS 파일 다운\u003c/h1\u003e\n\u003cp\u003erehype-highlight를 적용하더라도 CSS 파일을 불러오지 않으면 코드에 색상이 적용되지 않는다. CSS는 원하는 스타일을 알아서 찾아야 한다.\n단, rehype 플러그인으로 rehype-highlight를 사용했으므로 CSS 파일은 반드시 highlight.js에서 찾아야 한다.\u003c/p\u003e\n\u003ch2\u003ehighlight.js에서 가져오기\u003c/h2\u003e\n\u003cp\u003e나는 GitHub의 마크다운 스타일을 적용하고 싶어서 코드블럭도 GitHub 스타일로 했다. CSS 파일을 쉽게 찾기 위해 \u003ca href=\"https://highlightjs.org/\" title=\"highlight.js\"\u003ehighlight.js\u003c/a\u003e을 설치했다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sh\"\u003enpm install highlight.js\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003enode_modules/highlight.js/styles\u003c/code\u003e를 열어보면 굉장히 많은 CSS 파일을 찾을 수 있다. 하나하나가 다 코드블럭 CSS 파일들이다. \u003ccode\u003e.min.css\u003c/code\u003e는 크기를 줄인 파일, \u003ccode\u003e.css\u003c/code\u003e는 일반 CSS 파일이다. 다크 모드와 라이트 모드가 필요해서 \u003ccode\u003egithub-dark.css\u003c/code\u003e와 \u003ccode\u003egithub.css\u003c/code\u003e를 가져왔고, 파일을 얻은 뒤에는 highlight.js를 삭제했다. \u003ccode\u003e.min.css\u003c/code\u003e를 가져오면 수정이 어렵다.\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003e패키지 설치가 싫다면 \u003ca href=\"https://github.com/highlightjs/highlight.js/tree/main/src/styles\" title=\"highlight.js GitHub Repository: /src/styles\"\u003ehighlight.js 리포지토리\u003c/a\u003e에서도 가져올 수 있다.\u003c/strong\u003e\u003c/p\u003e\n\u003ch2\u003e다크 모드 / 라이트 모드 합치기\u003c/h2\u003e\n\u003cp\u003e각 파일에는 클래스와 색상이 바로 연결되어 있다. Tailwind CSS로 다크 모드와 라이트 모드를 사용하기 위해 \u003ccode\u003e\u0026#x3C;html\u003e\u003c/code\u003e태그의 \u003ccode\u003eclass\u003c/code\u003e를 \u003ccode\u003edark\u003c/code\u003e와 \u003ccode\u003elight\u003c/code\u003e로 바꿔줄 것이기 때문에 이것을 이용해서 두 파일을 합쳤다.\u003c/p\u003e\n\u003cp\u003e먼저, 각 파일에 있는 색상 코드를 변수로 만들어준다. 변수 이름은 자유롭게 짓는다. 다크 모드와 라이트 모드에서 같은 이름의 변수를 사용해야 한다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-css\"\u003e\u003cspan class=\"hljs-selector-tag\"\u003ehtml\u003c/span\u003e,\n\u003cspan class=\"hljs-selector-tag\"\u003ehtml\u003c/span\u003e\u003cspan class=\"hljs-selector-attr\"\u003e[class=\u003cspan class=\"hljs-string\"\u003e'light'\u003c/span\u003e]\u003c/span\u003e {\n  \u003cspan class=\"hljs-attr\"\u003e--color-hljs-color\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e#24292e\u003c/span\u003e;\n  \u003cspan class=\"hljs-attr\"\u003e--color-hljs-background\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e#ffffff\u003c/span\u003e;\n  ...;\n}\n\u003cspan class=\"hljs-selector-tag\"\u003ehtml\u003c/span\u003e\u003cspan class=\"hljs-selector-attr\"\u003e[class=\u003cspan class=\"hljs-string\"\u003e'dark'\u003c/span\u003e]\u003c/span\u003e {\n  \u003cspan class=\"hljs-attr\"\u003e--color-hljs-color\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e#c9d1d9\u003c/span\u003e;\n  \u003cspan class=\"hljs-attr\"\u003e--color-hljs-background\u003c/span\u003e: \u003cspan class=\"hljs-number\"\u003e#0d1117\u003c/span\u003e;\n  ...;\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e그리고 원래 색상 코드가 있던 자리에 해당 변수를 넣어준다.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-css\"\u003e\u003cspan class=\"hljs-selector-class\"\u003e.hljs\u003c/span\u003e {\n\t\u003cspan class=\"hljs-attribute\"\u003ecolor\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003evar\u003c/span\u003e(--color-hljs-background);\n}\n\n...\n\n\u003cspan class=\"hljs-selector-class\"\u003e.hljs-section\u003c/span\u003e {\n\t\u003cspan class=\"hljs-attribute\"\u003ecolor\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003evar\u003c/span\u003e(--color-section);\n\t\u003cspan class=\"hljs-attribute\"\u003efont-weight\u003c/span\u003e: bold;\n}\n\n...\n\u003c/code\u003e\u003c/pre\u003e\n\u003cblockquote\u003e\n\u003cp\u003e혹시나 이 작업이 귀찮다면 내가 \u003ca href=\"/github-markdown-codeblock.css\" title=\"github-markdown-codeblock.css\"\u003e합쳐놓은 파일\u003c/a\u003e을 사용해도 된다.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2\u003eCSS 적용\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003e/app/layout\u003c/code\u003e에 CSS 파일을 import 한다.\u003c/p\u003e"])</script><script>self.__next_f.push([1,"2:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/8c778e73ed56f245.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],[\"$\",\"$L3\",null,{\"buildId\":\"fehhpasi4J_9q9Mf824ex\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/blog/GitHub%20Pages%20%2B%20Next.js/06-highlight-codeblock\",\"initialTree\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"board\",\"GitHub%20Pages%20%2B%20Next.js\",\"d\"],{\"children\":[[\"post\",\"06-highlight-codeblock\",\"d\"],{\"children\":[\"__PAGE__?{\\\"board\\\":\\\"GitHub Pages + Next.js\\\",\\\"post\\\":\\\"06-highlight-codeblock\\\"}\",{}]}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":[false,\"$L4\"],\"globalErrorComponent\":\"$5\",\"children\":[null,[\"$\",\"html\",null,{\"children\":[\"$\",\"body\",null,{\"children\":[\"$\",\"$L6\",null,{\"children\":[[\"$\",\"header\",null,{\"className\":\"h-16 sticky top-0 flex justify-center shadow bg-white/70 items-center backdrop-blur-sm dark:bg-black/80 dark:shadow-neutral-800\",\"children\":[\"$\",\"nav\",null,{\"className\":\"flex \",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex font-bold\",\"children\":[[\"$\",\"$L7\",\"Blog\",{\"href\":\"/blog\",\"className\":\"transition flex justify-center w-16 text-gray-900 hover:text-gray-300 dark:text-gray-100 dark:hover:text-gray-600\",\"children\":\"Blog\"}],[\"$\",\"$L7\",\"About\",{\"href\":\"/about\",\"className\":\"transition flex justify-center w-16 text-gray-900 hover:text-gray-300 dark:text-gray-100 dark:hover:text-gray-600\",\"children\":\"About\"}]]}],[\"$\",\"div\",null,{\"className\":\"flex\",\"children\":[\"$\",\"$L8\",null,{}]}]]}]}],[\"$\",\"main\",null,{\"children\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"className\":\"flex flex-col h-[90vh] items-center justify-center\",\"children\":[\"$\",\"div\",null,{\"className\":\"flex items-center\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"inline-block text-2xl pr-8 mr-8 border-r-[1.5px] border-gray-400 py-2\",\"children\":\"404\"}],[\"$\",\"h2\",null,{\"className\":\"inline-block text-lg\",\"children\":\"This page could not be found\"}]]}]}],\"notFoundStyles\":[],\"childProp\":{\"current\":[null,[\"$\",\"div\",null,{\"className\":\"my-10 grid grid-cols-[1fr,minmax(auto,1100px),1fr]\",\"children\":[\"$\",\"div\",null,{\"className\":\"col-start-2 grid grid-cols-[minmax(auto,200px),min(700px,100%)] gap-x-10\",\"children\":[[\"$\",\"div\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"space-y-5\",\"children\":[[\"$\",\"div\",\"Web\",{\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-1 px-3 font-semibold tracking-wider text-zinc-400\",\"children\":\"Web\"}],[[\"$\",\"$L7\",\"GitHub Pages + Next.js\",{\"href\":\"/blog/GitHub Pages + Next.js\",\"className\":\"block rounded-md m-0 px-3 py-1 text-sm font-medium hover:bg-gray-100 hover:text-zinc-800 dark:hover:bg-zinc-800 dark:hover:text-zinc-100\",\"children\":[[\"$\",\"span\",null,{\"className\":\"pr-1.5\",\"children\":\"GitHub Pages + Next.js\"}],[\"$\",\"span\",null,{\"className\":\"text-gray-400\",\"children\":[\"(\",9,\")\"]}]]}]]]}]]}]}],[\"$\",\"div\",null,{\"children\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",[\"board\",\"GitHub%20Pages%20%2B%20Next.js\",\"d\"],\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"$b\",\"children\",[\"post\",\"06-highlight-codeblock\",\"d\"],\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$Lc\",[\"$\",\"article\",null,{\"className\":\"mx-auto\",\"children\":[[\"$\",\"div\",null,{\"className\":\"mb-12 text-center\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"mb-1 text-3xl font-bold\",\"children\":\"Contentlayer에서 코드블럭 하이라이트\"}],[\"$\",\"time\",null,{\"dateTime\":\"2023-11-18T12:30:00.000Z\",\"className\":\"mb-1 text-xs text-gray-600 dark:text-gray-400\",\"children\":\"2023. 11. 18. 21:30\"}]]}],[\"$\",\"div\",null,{\"className\":\"markdown-body\",\"dangerouslySetInnerHTML\":{\"__html\":\"$d\"}}]]}],null],\"segment\":\"__PAGE__?{\\\"board\\\":\\\"GitHub Pages + Next.js\\\",\\\"post\\\":\\\"06-highlight-codeblock\\\"}\"},\"styles\":null}],\"segment\":[\"post\",\"06-highlight-codeblock\",\"d\"]},\"styles\":null}],\"segment\":[\"board\",\"GitHub%20Pages%20%2B%20Next.js\",\"d\"]},\"styles\":null}]}]]}]}],null],\"segment\":\"blog\"},\"styles\":null}]}]]}]}]}],null]}]]\n"])</script><script>self.__next_f.push([1,"4:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Contentlayer에서 코드블럭 하이라이트 | 개발 일지\"}],[\"$\",\"link\",\"3\",{\"rel\":\"icon\",\"href\":\"/favicon.png\"}]]\nc:null\n"])</script><script>self.__next_f.push([1,""])</script></body></html>